{% extends "base.html" %}

{% block content %}
    <table>

    <div class="media">
      <img class="rounded-circle account-img" src="{{image_file}}">
      <div class="media-body">
        <div class="container">
          <h2 class="account-heading">{{user.first_name}} {{user.last_name}}</h2>
          <p class="text-secondary">{{user.about_me}}</p>  
          {% if user.id == current_user.id%}
            <a href="{{url_for('edit_profile')}}">Edit your Profile</a>
          {%endif%}
        </div>
      </div>
    </table>
    <hr>
        <dl class="row">
          <dt class="col-sm-3">
            <p class="lead">Watchlist</p>      
              {% for ticker in tickers %}
                <a href="{{url_for('ticker', ticker=ticker.symbol)}}" class="badge badge-light">{{ticker.symbol}}</a>                
              {% endfor %} 
          </dt>
          <dt class="col-sm-9">
            <p class="lead"> Posts </p>

              {% if posts != None %}
                {% for post in posts %}
                  <div class="p-4 mb-3 bg-light rounded"> 

                  <h2 class="blog-post-title"><a href="{{url_for('post', post=post.id)}}">{{post.title}}</a></h2>
                  <p class="blog-post-meta">{{ post.timestamp.strftime('%Y-%m-%d')}} by <a href="{{ url_for('user', username=post.author.username)}}">{{post.author.first_name}} {{post.author.last_name}}</a></p>
                {% for ticker in post.tickers %}
                  <a href="{{url_for('ticker', ticker=ticker.symbol)}}" class="badge badge-light">{{ticker.symbol}}</a>
                      {% endfor %}
                  </div>
                  <hr>
                {% endfor %}
            {% else %}
              <div class="p-4 mb-3 bg-light rounded"> {{user.first_name}} hasn't created any posts</div>
            {% endif %}
          </dt>
        </dl>
{% endblock %}